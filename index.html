
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Karol Stasiak's Blog</title>
  <meta name="author" content="Karol Stasiak">

  
  <meta name="description" content="Suppose you have two ZIP archives on two different machines and you want to synchronize their contents with minimal network traffic, without much &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://KarolS.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Karol Stasiak's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-45876308-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Karol Stasiak's Blog</a></h1>
  
    <h2>Coding from an elevator.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:KarolS.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/09/13/incremental-synchronization-of-zip-files-in-bandwidth-constrained-environments/">Incremental Synchronization of ZIP Files in Bandwidth-constrained Environments</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-09-13T18:57:00+02:00" pubdate data-updated="true">2015-09-13</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Suppose you have two ZIP archives on two different machines and you want to synchronize their contents with minimal network traffic, without much regard for the CPU usage, and you know that the target machine already contains the older version of the archive, which is mostly identical to the new version. For example, you have to upload a fat JAR with the new build over a metered connection, and the server literally sits in a garage at the other end of the country.</p>

<p>If the archive is small, uploading it in its entirety looks simple enough, but if it grows into dozens of megabytes, of which 90% is non-changing 3rd party code, it quickly becomes a waste of both time and bandwidth.</p>

<p>Time is money. And depending on your ISP, bandwidth can be money too.</p>

<p>Long story short, I’m going to assume that the target machine runs Linux, and the source machine runs either Windows or Linux. I am going to use <code>rsync</code> and <code>fuse-zip</code>.</p>

<p>Why those two? Because <code>fuse-zip</code> can convert a ZIP archive into a writeable filesystem, and <code>rsync</code> can sync a writeable filesystem with another. Details below.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/09/13/incremental-synchronization-of-zip-files-in-bandwidth-constrained-environments/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/08/java-8-functional-interfaces-cheatsheet/">Java 8 Functional Interfaces Cheatsheet</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-08-08T22:37:00+02:00" pubdate data-updated="true">2015-08-08</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Java 8 introduced basic support for first-class functions. The functions, unlike in other languages, aren’t represented by only handful of types. Instead, Java 8 uses dozens of various types depending on arity, parameter types and the return type. The standard documentation is pretty unwieldy, so for my and your convenience, I prepared a list of all functional interfaces in a more useful order.</p>

<p>Few things to have in mind:</p>

<ul>
  <li>
    <p>All interfaces are in <code>java.util.function</code> package unless otherwise noted.</p>
  </li>
  <li>
    <p>Interfaces are specialized only for <code>boolean</code>, <code>int</code>, <code>long</code> and <code>double</code>, and only sometimes. Other primitive types, and all primitive types in certain situations, will have to be boxed.</p>
  </li>
</ul>

<h3 id="nullary-functions">Nullary functions</h3>

<table>
  <thead>
    <tr>
      <th>function type</th>
      <th>Java type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>() → <strong>void</strong></td>
      <td><code>java.lang.Runnable</code></td>
    </tr>
    <tr>
      <td>() → <strong>boolean</strong></td>
      <td><code>BooleanSupplier</code></td>
    </tr>
    <tr>
      <td>() → <strong>int</strong></td>
      <td><code>IntSupplier</code></td>
    </tr>
    <tr>
      <td>() → <strong>long</strong></td>
      <td><code>LongSupplier</code></td>
    </tr>
    <tr>
      <td>() → <strong>double</strong></td>
      <td><code>DoubleSupplier</code></td>
    </tr>
    <tr>
      <td>() → <em>A</em></td>
      <td><code>Supplier&lt;A&gt;</code> or <code>java.lang.Callable&lt;A&gt;</code></td>
    </tr>
  </tbody>
</table>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/08/08/java-8-functional-interfaces-cheatsheet/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/29/random-ideas-for-scala-3-0/">Random Ideas for Scala 3.0</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-29T01:22:00+02:00" pubdate data-updated="true">2014-04-29</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Here comes a list of things that I would love to see in Scala 3.0. Some of them are breaking changes, hence 3.0 not 2.13 or anything like that. Some of them are about the compiler, some of them are about the library, some of them are about the external tools. Some of those ideas are different solutions for the same problem.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/04/29/random-ideas-for-scala-3-0/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/29/implementing-catamorphisms-in-java/">Implementing Catamorphisms in Java</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-29T01:20:00+02:00" pubdate data-updated="true">2014-04-29</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>Warning: I’m now going to wake up the ghosts of the past. The past which includes your undergraduate abstract algebra lectures.</em></p>

<p>This post is mostly a result of my boredom and my willingness to show that you can shoehorn almost every abstraction into almost every programming language, but it’s not exactly the best idea to do so.</p>

<p>Also, I simply wanted to say a word or two about several abstract mathematical concepts. It can be a worthwhile intellectual exercise.</p>

<h2 id="algebras">Algebras</h2>

<p>Before I talk about catamorphisms, mentioned in the title, I’d like to have a look at a very abstract and general mathematical structure: an algebra.</p>

<p>An <strong>algebra</strong> is a tuple that contains:</p>

<ul>
  <li>
    <p>some sets (called carrier sets), most often one</p>
  </li>
  <li>
    <p>usually some operations, each of them from some Cartesian product of the carrier sets to one of the carrier sets</p>
  </li>
  <li>
    <p>sometimes some distinguished elements from those sets (they’re often superfluous, but they will be required later; you can also think about them as of nullary operations)</p>
  </li>
</ul>

<p>Examples: </p>

<ul>
  <li>
    <p>a set of strings <code>Str</code> and the operation of concatenation <code>+: Str × Str → Str</code></p>
  </li>
  <li>
    <p>a set of natural numbers <code>Nat</code> and the operation of addition: <code>+: Nat × Nat → Nat</code></p>
  </li>
  <li>
    <p>a set of finite subsets of natural numbers <code>Nat</code> and a set of natural numbers <code>P(Nat)</code>, a distinguished empty set <code>Ø</code> and the operations of union and intersection <code>P(Nat) × P(Nat) → P(Nat)</code> and the largest element operation <code>max: P(Nat) → Nat</code> (with <code>max(Ø) = 0</code>)</p>
  </li>
</ul>

<p><em>Note: I’m using the <code>+</code> operator for string concatenation because the article is supposed to end up with creating some Java code, and Java uses <code>+</code> for string concatenation.</em></p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/04/29/implementing-catamorphisms-in-java/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/29/from-nested-monads-to-kleisli-arrows-over-monad-transformers/">From Explicit Nested Monads to Kleisli Arrows Over Monad Transformers</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-29T01:15:00+02:00" pubdate data-updated="true">2014-04-29</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Recently at work I had a task of developing a small tool that could display charts with progress of our data extraction over time. </p>

<p>After each iteration, results of data extraction were stored in several directories and compared against a handwritten reference set.</p>

<p>In short, this is the directory structure:</p>

<figure class="code"><div class="highlight"><table><tr><td class="line-numbers" aria-hidden="true"><pre><div data-line="1" class="line-number"></div><div data-line="2" class="line-number"></div><div data-line="3" class="line-number"></div><div data-line="4" class="line-number"></div><div data-line="5" class="line-number"></div><div data-line="6" class="line-number"></div><div data-line="7" class="line-number"></div><div data-line="8" class="line-number"></div><div data-line="9" class="line-number"></div><div data-line="10" class="line-number"></div><div data-line="11" class="line-number"></div><div data-line="12" class="line-number"></div><div data-line="13" class="line-number"></div><div data-line="14" class="line-number"></div><div data-line="15" class="line-number"></div><div data-line="16" class="line-number"></div><div data-line="17" class="line-number"></div><div data-line="18" class="line-number"></div><div data-line="19" class="line-number"></div><div data-line="20" class="line-number"></div></pre></td><td class="main  plain"><pre><div class="line">|--+ batch1
</div><div class="line">|  |--+ correct
</div><div class="line">|  |  `--- data.txt
</div><div class="line">|  |--+ guessed
</div><div class="line">|  |  |--- data.00000145a8ab68b9.txt
</div><div class="line">|  |  |--- data.00000145a92a530f.txt
</div><div class="line">|  |  `--- data.0000014594039f5b.txt
</div><div class="line">|  |--- input1.pdf
</div><div class="line">|  |--- input2.pdf
</div><div class="line">|  `--- input3.pdf
</div><div class="line">`--+ batch2
</div><div class="line">   |--+ correct
</div><div class="line">   |  `--- data.txt
</div><div class="line">   |--+ guessed
</div><div class="line">   |  |--- data.00000145a8ab68b9.txt
</div><div class="line">   |  |--- data.00000145a92a530f.txt
</div><div class="line">   |  `--- data.0000014594039f5b.txt
</div><div class="line">   |--- input4.pdf
</div><div class="line">   |--- input5.pdf
</div><div class="line">   `--- input6.pdf</div></pre></td></tr></table></div></figure>

<p>The hexadecimal numbers are timestamps in milliseconds since Unix epoch.</p>

<p>Each file consisted of records in the format:</p>

<figure class="code"><div class="highlight"><table><tr><td class="line-numbers" aria-hidden="true"><pre><div data-line="1" class="line-number"></div><div data-line="2" class="line-number"></div><div data-line="3" class="line-number"></div></pre></td><td class="main  plain"><pre><div class="line">input1.pdf value from the first file
</div><div class="line">input2.pdf value from the second file
</div><div class="line">input3.pdf value from the third file</div></pre></td></tr></table></div></figure>

<p>Long story short, there was no difference what programming language I would write the tool in, so I picked Haskell. Let’s ignore most details of the implementation. What’s important for this entry, is that I implemented the following functions:</p>

<figure class="code"><div class="highlight"><table><tr><td class="line-numbers" aria-hidden="true"><pre><div data-line="1" class="line-number"></div><div data-line="2" class="line-number"></div><div data-line="3" class="line-number"></div><div data-line="4" class="line-number"></div></pre></td><td class="main  haskell"><pre><div class="line"><span class="nf">allCorrectFiles</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">FilePath</span><span class="p">]</span>  <span class="ow">-&gt;</span> <span class="kt">IO</span> <span class="p">[</span><span class="kt">FilePath</span><span class="p">]</span>
</div><div class="line"><span class="nf">allGuessedFiles</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">FilePath</span><span class="p">]</span>  <span class="ow">-&gt;</span> <span class="kt">IO</span> <span class="p">[(</span><span class="kt">LocalTime</span><span class="p">,</span> <span class="kt">FilePath</span><span class="p">)]</span>
</div><div class="line"><span class="nf">readDataFile</span> <span class="ow">::</span> <span class="kt">FilePath</span> <span class="ow">-&gt;</span> <span class="kt">IO</span> <span class="p">[(</span><span class="kt">Entry</span><span class="p">,</span> <span class="kt">String</span><span class="p">)]</span>
</div><div class="line"><span class="nf">getAllData</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">FilePath</span><span class="p">]</span> <span class="ow">-&gt;</span> <span class="kt">IO</span> <span class="p">([(</span><span class="kt">Entry</span><span class="p">,</span> <span class="kt">String</span><span class="p">)],</span> <span class="p">[(</span><span class="kt">LocalTime</span><span class="p">,</span> <span class="kt">Entry</span><span class="p">,</span> <span class="kt">String</span><span class="p">)])</span>
</div></pre></td></tr></table></div></figure>

<p>The initial implementation of the <code>getAllData</code> function was straightforward, yet a bit clunky:</p>

<figure class="code"><div class="highlight"><table><tr><td class="line-numbers" aria-hidden="true"><pre><div data-line="1" class="line-number"></div><div data-line="2" class="line-number"></div><div data-line="3" class="line-number"></div><div data-line="4" class="line-number"></div><div data-line="5" class="line-number"></div><div data-line="6" class="line-number"></div><div data-line="7" class="line-number"></div><div data-line="8" class="line-number"></div></pre></td><td class="main  haskell"><pre><div class="line"><span class="nf">getAllData</span> <span class="n">subDirs</span> <span class="ow">=</span> <span class="kr">do</span>
</div><div class="line">	<span class="n">correctFiles</span> <span class="ow">&lt;-</span> <span class="n">allCorrectFiles</span> <span class="n">subDirs</span>
</div><div class="line">	<span class="n">guessedFiles</span> <span class="ow">&lt;-</span> <span class="n">allGuessedFiles</span> <span class="n">subDirs</span>
</div><div class="line">	<span class="n">correctData</span> <span class="ow">&lt;-</span> <span class="n">mapM</span> <span class="n">readDataFile</span> <span class="n">correctFiles</span>
</div><div class="line">	<span class="n">guessedData</span> <span class="ow">&lt;-</span> <span class="n">forM</span> <span class="n">guessedFiles</span> <span class="o">$</span> <span class="nf">\</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">f</span><span class="p">)</span> <span class="ow">-&gt;</span>
</div><div class="line">		<span class="n">x</span> <span class="ow">&lt;-</span> <span class="n">readDataFile</span> <span class="n">f</span>
</div><div class="line">		<span class="n">return</span> <span class="o">$</span> <span class="n">map</span> <span class="p">(</span><span class="nf">\</span><span class="p">(</span><span class="n">e</span><span class="p">,</span><span class="n">s</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">e</span><span class="p">,</span><span class="n">s</span><span class="p">))</span> <span class="n">x</span>
</div><div class="line">	<span class="n">return</span> <span class="p">(</span><span class="n">concat</span> <span class="n">correctData</span><span class="p">,</span> <span class="n">concat</span> <span class="n">guessedData</span><span class="p">)</span>
</div></pre></td></tr></table></div></figure>

<p>This code is quite ugly. The especially jarring were the <code>return $ map</code> combination and <code>concat</code>s in the final line.</p>

<p>After a while, I noticed that all the functions I call from the <code>getData</code> function are of type <code>a -&gt; IO [b]</code>. A double monad. So, I added <code>transformers</code> library to my project and rewritten that function as:</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/04/29/from-nested-monads-to-kleisli-arrows-over-monad-transformers/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/03/hocr4j-0-1-released/">hOCR4J 0.1 Released</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-03T00:11:00+01:00" pubdate data-updated="true">2014-01-03</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I would like to announce the release of a Java library for parsing hOCR documents: <strong>hOCR4J</strong>. You can <a href="https://github.com/KarolS/hOCR4J">download it from here</a>. I’m planning to get it to Sonatype too, so you may be able to get it from there in the near future.</p>

<p>hOCR is an output format used by OCR programs, including <a href="http://code.google.com/p/tesseract-ocr">Tesseract</a>. It contains information about all the OCR’d words, their position, and their assumed organisation into lines and paragraphs. Currently, hOCR4J was tested to work with Tesseract-generated hOCR’s, I plan to test other OCR programs in the future.</p>

<p>hOCR4J parses hOCR documents, creates an immutable model for them (nice when using functional programming style), and provides various tools to manipulate and modify them.</p>

<p>hOCR4J makes a good starting point when developing an application which extracts data from OCR’d documents that have non-trivial layouts.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/01/03/hocr4j-0-1-released/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/02/units-0-1-released/">Units 0.1 Released</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-01-02T20:26:00+01:00" pubdate data-updated="true">2014-01-02</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>After several months of not-so-intensive work, I present the version 0.1 of the <em>Units</em> library: <a href="https://github.com/KarolS/units">https://github.com/KarolS/units</a>.</p>

<p><em>Units</em> is a Scala library for providing type-level units of measurements checked on compile time. The goal of the library was to provide as seamless as possible way to check if the units used in arithmetic expressions are correct.</p>

<p><em>If you have tried to compile it: Yes it does compile that long. A clean build takes 100 seconds on my i7.</em></p>

<p>Compile-time unit checking has multiple applications:</p>

<ul>
  <li>
    <p>scientists will be able to distinguish values in metres per second, metres, metres per second squared <a href="http://en.wikipedia.org/wiki/Mars_Climate_Orbiter">instead of crashing expensive space exploration equipment</a> or <a href="https://www.ismp.org/newsletters/acutecare/articles/A3Q99Action.asp">drugging a patient</a></p>
  </li>
  <li>
    <p>engineers will be able to distinguish values in metres, centimetres, feet, inches, litres, gallons <a href="http://en.wikipedia.org/wiki/Air_Canada_Flight_143">instead of running out of fuel in the middle of a flight</a> or <a href="http://spectrum.ieee.org/tech-talk/at-work/test-and-measurement/columbuss-geographical-miscalculations">thinking the distance to travel is many times shorter</a></p>
  </li>
  <li>
    <p>designers will be able to distinguish values in millimetres, inches, pixels, points</p>
  </li>
  <li>
    <p>economists will be able to distinguish values in euros, dollars, dollars per hour, ounces of gold</p>
  </li>
  <li>
    <p>game developers will be able to distinguish values in pixels, tiles, damage points, minerals, barrels of vespen gas</p>
  </li>
  <li>
    <p>network software developers will be able to distinguish values in kilobytes, kibibytes, kilobits, kilobits per second</p>
  </li>
  <li>
    <p>and so on and on</p>
  </li>
</ul>

<p>There are not many languages with units of measurement support, the first that comes to mind is <a href="http://msdn.microsoft.com/en-us/library/dd233243.aspx">F#</a>. I must admit that it is great at this. There also other languages that support units as a first-class language feature, and many that support units with a library. Those libraries vary in their expressibility and versatility, some of them only allow SI units, some of them require you to explicitly express relations between multiplied values, and some of them only support a limited subset of units. There have been earlier Scala libraries with units of measurements, but they all had severe limitations. <em>Units</em> library tries to be both expressive and versatile. While it’s not as powerful as F# built-in unit support, it definitely allows for quite a bit.</p>

<p>Enough of that, time for some examples that will showcase the main features.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2014/01/02/units-0-1-released/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/11/18/creating-custom-keyboard-layouts-for-linux/">Creating Custom Keyboard Layouts for Linux</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-11-18T21:05:00+01:00" pubdate data-updated="true">2013-11-18</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I think almost every one of you has some beef with your keyboard layout. There are characters you’re never going to use, there are characters you’d love to use but they’re missing (and you don’t like/can’t use the compose key for them), and so on.</p>

<p>For example, this is the default Polish layout in Linux:</p>

<p><img src="/images/layout-pl.png" /></p>

<p>A keen eye can notice several things that could be improved:</p>

<ul>
  <li>
    <p>many characters can be input in multiple ways: <code>[</code> (as <code>[</code> or as <code>AltGr-9</code>), <code>ł</code> (as <code>AltGr-w</code> or <code>AltGr-l</code>), <code>&amp;</code> (as <code>Shift-7</code> or <code>AltGr-Shift-k</code>), <code>@</code> (as <code>Shift-2</code> or <code>AltGr-q</code>),</p>
  </li>
  <li>
    <p>the layout has some unassigned combinations (for example <code>AltGr-Shift-4</code>),</p>
  </li>
  <li>
    <p>some important characters are missing: <code>€</code> (the euro sign) and <code>„</code> (Polish opening quote),</p>
  </li>
  <li>
    <p>since I can use the compose key, I don’t need all those arbitrarily assigned dead keys on the right.</p>
  </li>
</ul>

<p>Of course your keyboard layout may have different problems.</p>

<p><strong>Disclaimer:</strong> The following was done on Ubuntu 12.04 with Unity DE, I don’t guarantee it will work on other distros. In particular, the file paths can differ.</p>

<p>How to create a new one, you ask? That’s actually pretty simple.</p>

<ul>
  <li>
    <p>layout definitions are in the <code>/usr/share/X11/xkb/symbols</code> directory,</p>
  </li>
  <li>
    <p>layout metadata are in the <code>/usr/share/X11/xkb/rules/evdev.xml</code> file.</p>
  </li>
</ul>

<p>Let’s first define our layout. The <code>/usr/share/X11/xkb/symbols</code> contains files, each corresponding to a language. Some layouts can belong to several languages, but they’re defined in only one of the files. If your layout is supposed to be listed under one language in the keyboard setting anyway, you’ll have to add it to the correct file. Since my keyboard layout was to be mostly an improvement on top of the Polish language layout, I decided to add it to <code>/usr/share/X11/xkb/symbols/pl</code>.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2013/11/18/creating-custom-keyboard-layouts-for-linux/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/10/21/test-post-please-ignore/">Test Post Please Ignore</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-10-21T17:03:00+02:00" pubdate data-updated="true">2013-10-21</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I’m figuring out how to use Octopress. Looks good so far.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/09/13/incremental-synchronization-of-zip-files-in-bandwidth-constrained-environments/">Incremental Synchronization of ZIP Files in Bandwidth-constrained Environments</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/08/java-8-functional-interfaces-cheatsheet/">Java 8 Functional Interfaces Cheatsheet</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/29/random-ideas-for-scala-3-0/">Random Ideas for Scala 3.0</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/29/implementing-catamorphisms-in-java/">Implementing Catamorphisms in Java</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/29/from-nested-monads-to-kleisli-arrows-over-monad-transformers/">From Explicit Nested Monads to Kleisli Arrows Over Monad Transformers</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Category Cloud</h1>
    <span id="tag-cloud"><a href='/categories/command-line' style='font-size: 110.0%'>command line(1)</a> <a href='/categories/deployment' style='font-size: 110.0%'>deployment(1)</a> <a href='/categories/haskell' style='font-size: 110.0%'>haskell(1)</a> <a href='/categories/hocr4j' style='font-size: 110.0%'>hocr4j(1)</a> <a href='/categories/java' style='font-size: 130.0%'>java(3)</a> <a href='/categories/keyboard' style='font-size: 110.0%'>keyboard(1)</a> <a href='/categories/linux' style='font-size: 120.0%'>linux(2)</a> <a href='/categories/maths' style='font-size: 110.0%'>maths(1)</a> <a href='/categories/ocr' style='font-size: 110.0%'>ocr(1)</a> <a href='/categories/personal-project' style='font-size: 120.0%'>personal project(2)</a> <a href='/categories/programming' style='font-size: 160.0%'>programming(6)</a> <a href='/categories/scala' style='font-size: 120.0%'>scala(2)</a> <a href='/categories/unicode' style='font-size: 110.0%'>unicode(1)</a> <a href='/categories/units' style='font-size: 110.0%'>units(1)</a> <a href='/categories/units-of-measurement' style='font-size: 110.0%'>units of measurement(1)</a> </span>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Karol Stasiak -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'codingfromanelevator';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
