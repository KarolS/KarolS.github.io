
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>From explicit nested monads to Kleisli arrows over monad transformers - Karol Stasiak's Blog</title>
  <meta name="author" content="Karol Stasiak">

  
  <meta name="description" content="Recently at work I had a task of developing a small tool that could display charts with progress of our data extraction over time. After each &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://KarolS.github.io/blog/2014/04/29/from-nested-monads-to-kleisli-arrows-over-monad-transformers">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Karol Stasiak's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-45876308-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Karol Stasiak's Blog</a></h1>
  
    <h2>Coding from an elevator.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:KarolS.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">From Explicit Nested Monads to Kleisli Arrows Over Monad Transformers</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-29T01:15:00+02:00" pubdate data-updated="true">2014-04-29</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Recently at work I had a task of developing a small tool that could display charts with progress of our data extraction over time. </p>

<p>After each iteration, results of data extraction were stored in several directories and compared against a handwritten reference set.</p>

<p>In short, this is the directory structure:</p>

<figure class="code"><div class="highlight"><table><tr><td class="line-numbers" aria-hidden="true"><pre><div data-line="1" class="line-number"></div><div data-line="2" class="line-number"></div><div data-line="3" class="line-number"></div><div data-line="4" class="line-number"></div><div data-line="5" class="line-number"></div><div data-line="6" class="line-number"></div><div data-line="7" class="line-number"></div><div data-line="8" class="line-number"></div><div data-line="9" class="line-number"></div><div data-line="10" class="line-number"></div><div data-line="11" class="line-number"></div><div data-line="12" class="line-number"></div><div data-line="13" class="line-number"></div><div data-line="14" class="line-number"></div><div data-line="15" class="line-number"></div><div data-line="16" class="line-number"></div><div data-line="17" class="line-number"></div><div data-line="18" class="line-number"></div><div data-line="19" class="line-number"></div><div data-line="20" class="line-number"></div></pre></td><td class="main  plain"><pre><div class="line">|--+ batch1
</div><div class="line">|  |--+ correct
</div><div class="line">|  |  `--- data.txt
</div><div class="line">|  |--+ guessed
</div><div class="line">|  |  |--- data.00000145a8ab68b9.txt
</div><div class="line">|  |  |--- data.00000145a92a530f.txt
</div><div class="line">|  |  `--- data.0000014594039f5b.txt
</div><div class="line">|  |--- input1.pdf
</div><div class="line">|  |--- input2.pdf
</div><div class="line">|  `--- input3.pdf
</div><div class="line">`--+ batch2
</div><div class="line">   |--+ correct
</div><div class="line">   |  `--- data.txt
</div><div class="line">   |--+ guessed
</div><div class="line">   |  |--- data.00000145a8ab68b9.txt
</div><div class="line">   |  |--- data.00000145a92a530f.txt
</div><div class="line">   |  `--- data.0000014594039f5b.txt
</div><div class="line">   |--- input4.pdf
</div><div class="line">   |--- input5.pdf
</div><div class="line">   `--- input6.pdf</div></pre></td></tr></table></div></figure>

<p>The hexadecimal numbers are timestamps in milliseconds since Unix epoch.</p>

<p>Each file consisted of records in the format:</p>

<figure class="code"><div class="highlight"><table><tr><td class="line-numbers" aria-hidden="true"><pre><div data-line="1" class="line-number"></div><div data-line="2" class="line-number"></div><div data-line="3" class="line-number"></div></pre></td><td class="main  plain"><pre><div class="line">input1.pdf value from the first file
</div><div class="line">input2.pdf value from the second file
</div><div class="line">input3.pdf value from the third file</div></pre></td></tr></table></div></figure>

<p>Long story short, there was no difference what programming language I would write the tool in, so I picked Haskell. Let’s ignore most details of the implementation. What’s important for this entry, is that I implemented the following functions:</p>

<figure class="code"><div class="highlight"><table><tr><td class="line-numbers" aria-hidden="true"><pre><div data-line="1" class="line-number"></div><div data-line="2" class="line-number"></div><div data-line="3" class="line-number"></div><div data-line="4" class="line-number"></div></pre></td><td class="main  haskell"><pre><div class="line"><span class="nf">allCorrectFiles</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">FilePath</span><span class="p">]</span>  <span class="ow">-&gt;</span> <span class="kt">IO</span> <span class="p">[</span><span class="kt">FilePath</span><span class="p">]</span>
</div><div class="line"><span class="nf">allGuessedFiles</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">FilePath</span><span class="p">]</span>  <span class="ow">-&gt;</span> <span class="kt">IO</span> <span class="p">[(</span><span class="kt">LocalTime</span><span class="p">,</span> <span class="kt">FilePath</span><span class="p">)]</span>
</div><div class="line"><span class="nf">readDataFile</span> <span class="ow">::</span> <span class="kt">FilePath</span> <span class="ow">-&gt;</span> <span class="kt">IO</span> <span class="p">[(</span><span class="kt">Entry</span><span class="p">,</span> <span class="kt">String</span><span class="p">)]</span>
</div><div class="line"><span class="nf">getAllData</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">FilePath</span><span class="p">]</span> <span class="ow">-&gt;</span> <span class="kt">IO</span> <span class="p">([(</span><span class="kt">Entry</span><span class="p">,</span> <span class="kt">String</span><span class="p">)],</span> <span class="p">[(</span><span class="kt">LocalTime</span><span class="p">,</span> <span class="kt">Entry</span><span class="p">,</span> <span class="kt">String</span><span class="p">)])</span>
</div></pre></td></tr></table></div></figure>

<p>The initial implementation of the <code>getAllData</code> function was straightforward, yet a bit clunky:</p>

<figure class="code"><div class="highlight"><table><tr><td class="line-numbers" aria-hidden="true"><pre><div data-line="1" class="line-number"></div><div data-line="2" class="line-number"></div><div data-line="3" class="line-number"></div><div data-line="4" class="line-number"></div><div data-line="5" class="line-number"></div><div data-line="6" class="line-number"></div><div data-line="7" class="line-number"></div><div data-line="8" class="line-number"></div></pre></td><td class="main  haskell"><pre><div class="line"><span class="nf">getAllData</span> <span class="n">subDirs</span> <span class="ow">=</span> <span class="kr">do</span>
</div><div class="line">	<span class="n">correctFiles</span> <span class="ow">&lt;-</span> <span class="n">allCorrectFiles</span> <span class="n">subDirs</span>
</div><div class="line">	<span class="n">guessedFiles</span> <span class="ow">&lt;-</span> <span class="n">allGuessedFiles</span> <span class="n">subDirs</span>
</div><div class="line">	<span class="n">correctData</span> <span class="ow">&lt;-</span> <span class="n">mapM</span> <span class="n">readDataFile</span> <span class="n">correctFiles</span>
</div><div class="line">	<span class="n">guessedData</span> <span class="ow">&lt;-</span> <span class="n">forM</span> <span class="n">guessedFiles</span> <span class="o">$</span> <span class="nf">\</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">f</span><span class="p">)</span> <span class="ow">-&gt;</span>
</div><div class="line">		<span class="n">x</span> <span class="ow">&lt;-</span> <span class="n">readDataFile</span> <span class="n">f</span>
</div><div class="line">		<span class="n">return</span> <span class="o">$</span> <span class="n">map</span> <span class="p">(</span><span class="nf">\</span><span class="p">(</span><span class="n">e</span><span class="p">,</span><span class="n">s</span><span class="p">)</span> <span class="ow">-&gt;</span> <span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">e</span><span class="p">,</span><span class="n">s</span><span class="p">))</span> <span class="n">x</span>
</div><div class="line">	<span class="n">return</span> <span class="p">(</span><span class="n">concat</span> <span class="n">correctData</span><span class="p">,</span> <span class="n">concat</span> <span class="n">guessedData</span><span class="p">)</span>
</div></pre></td></tr></table></div></figure>

<p>This code is quite ugly. The especially jarring were the <code>return $ map</code> combination and <code>concat</code>s in the final line.</p>

<p>After a while, I noticed that all the functions I call from the <code>getData</code> function are of type <code>a -&gt; IO [b]</code>. A double monad. So, I added <code>transformers</code> library to my project and rewritten that function as:</p>

<!-- more -->

<figure class="code"><div class="highlight"><table><tr><td class="line-numbers" aria-hidden="true"><pre><div data-line="1" class="line-number"></div><div data-line="2" class="line-number"></div><div data-line="3" class="line-number"></div><div data-line="4" class="line-number"></div><div data-line="5" class="line-number"></div><div data-line="6" class="line-number"></div><div data-line="7" class="line-number"></div><div data-line="8" class="line-number"></div><div data-line="9" class="line-number"></div><div data-line="10" class="line-number"></div></pre></td><td class="main  haskell"><pre><div class="line"><span class="nf">getAllData</span> <span class="n">subDirs</span> <span class="ow">=</span> <span class="kr">do</span>
</div><div class="line">	<span class="n">correctData</span> <span class="ow">&lt;-</span> <span class="n">runListT</span> <span class="o">$</span> <span class="kr">do</span>
</div><div class="line">		<span class="n">f</span> <span class="ow">&lt;-</span> <span class="kt">ListT</span> <span class="o">$</span> <span class="n">allCorrectFiles</span> <span class="n">subDirs</span>
</div><div class="line">		<span class="n">x</span> <span class="ow">&lt;-</span> <span class="kt">ListT</span> <span class="o">$</span> <span class="n">readDataFile</span> <span class="n">f</span>
</div><div class="line">		<span class="n">return</span> <span class="n">x</span>	
</div><div class="line">	<span class="n">guessedData</span> <span class="ow">&lt;-</span> <span class="n">runListT</span> <span class="o">$</span> <span class="kr">do</span>
</div><div class="line">		<span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">f</span><span class="p">)</span> <span class="ow">&lt;-</span> <span class="kt">ListT</span> <span class="o">$</span> <span class="n">allGuessedFiles</span> <span class="n">subDirs</span>
</div><div class="line">		<span class="n">x</span> <span class="ow">&lt;-</span> <span class="kt">ListT</span> <span class="o">$</span> <span class="n">readDataFile</span> <span class="n">f</span>
</div><div class="line">		<span class="n">return</span> <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">fst</span> <span class="n">x</span><span class="p">,</span> <span class="n">snd</span> <span class="n">x</span><span class="p">)</span>
</div><div class="line">	<span class="n">return</span> <span class="p">(</span><span class="n">correctData</span><span class="p">,</span> <span class="n">guessedData</span><span class="p">)</span>
</div></pre></td></tr></table></div></figure>

<p>Now it looks way more uniform.</p>

<p>This was my first piece of code using monad transformers, so I will explain what’s going on to everyone who was in the same situation as me before understanding it.</p>

<p><code>IO</code> is a monad, so is <code>[]</code>. For some monads, if you wrap them in another monad, you still get something that can be used like a monad. One of such monads is <code>[]</code>.</p>

<p>For every monad <code>m</code> and type <code>a</code>, <code>m [a]</code> is a monad over <code>a</code>. But in order for Haskell to treat it as one singular monad, we need to wrap it. And that’s what <code>ListT</code> is for. </p>

<p>So <code>allCorrectFiles subDirs</code> returns <code>IO [FilePath]</code>, and after wrapping it with <code>ListT</code> we get <code>ListT IO FilePath</code>.</p>

<p>This way, we stack our monadic effects: we both iterate over elements of a list, and track impure side effects. If the <code>readDataFile</code> or <code>allGuessedFiles</code> were pure, we would use <code>[]</code> monad. If they were impure, but returned only one element, we’d use <code>IO</code> monad. By wrapping <code>IO [a]</code> into <code>ListT</code>, we can use them both.</p>

<p>Since the results of inner <code>do</code> blocks are now of type <code>ListT IO a</code>, we unwrap them with <code>runListT</code>.</p>

<p>Note that since <code>ListT</code> allowed <code>&lt;-</code> operator to unwrap not only the <code>IO</code> monad, but also the list monad, we didn’t end up with lists of lists and we no longer needed to <code>concat</code> those lists together.</p>

<p>The code got less ugly, but it also got a bit longer. Could I get it shorter?</p>

<p>The answer was yes, but only a teeny tiny bit, and involved some more complicated machinery. Arrows.</p>

<p>The trivial arrow instance for functions is easy to understand: <code>&gt;&gt;&gt;</code> behaves like flipped function composition, and there are several combinators, like <code>&amp;&amp;&amp;</code>, <code>***</code>, <code>first</code> and <code>second</code> that make it easier to work with 2-element tuples. </p>

<p>Since the return value from the <code>allGuessedFiles</code> was a list of 2-element tuples in an IO monad, and I only operated on the second element before fusing them together, I decided to use arrows. Luckily, the <code>base</code> library contains definitions for monadic arrows, which are to <code>&gt;&gt;=</code> as trivial arrows are to <code>.</code>.</p>

<p>The code had to involve even more wrapping and unwrapping. Here it is:</p>

<figure class="code"><div class="highlight"><table><tr><td class="line-numbers" aria-hidden="true"><pre><div data-line="1" class="line-number"></div><div data-line="2" class="line-number"></div><div data-line="3" class="line-number"></div><div data-line="4" class="line-number"></div><div data-line="5" class="line-number"></div><div data-line="6" class="line-number"></div><div data-line="7" class="line-number"></div><div data-line="8" class="line-number"></div><div data-line="9" class="line-number"></div></pre></td><td class="main  haskell"><pre><div class="line"><span class="nf">getAllData</span> <span class="n">subDirs</span> <span class="ow">=</span> <span class="kr">do</span>
</div><div class="line">	<span class="n">correctData</span> <span class="ow">&lt;-</span> <span class="n">runKL</span> <span class="n">subDirs</span> <span class="o">$</span>
</div><div class="line">		<span class="n">kl</span> <span class="n">allCorrectFiles</span> <span class="o">&gt;&gt;&gt;</span> <span class="n">kl</span> <span class="n">readDataFile</span>
</div><div class="line">	<span class="n">guessedData</span> <span class="ow">&lt;-</span> <span class="n">runKL</span> <span class="n">subDirs</span> <span class="o">$</span>
</div><div class="line">		<span class="n">kl</span> <span class="n">allGuessedFiles</span> <span class="o">&gt;&gt;&gt;</span> <span class="n">second</span> <span class="p">(</span><span class="n">kl</span> <span class="n">readDataFile</span><span class="p">)</span> <span class="o">&gt;&gt;^</span> <span class="nf">\</span><span class="p">(</span><span class="n">a</span><span class="p">,(</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">))</span> <span class="ow">-&gt;</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
</div><div class="line">	<span class="n">return</span> <span class="p">(</span><span class="n">correctData</span><span class="p">,</span> <span class="n">guessedData</span><span class="p">)</span>
</div><div class="line">	<span class="kr">where</span>
</div><div class="line">		<span class="n">kl</span> <span class="n">f</span> <span class="ow">=</span> <span class="kt">Kleisli</span> <span class="o">$</span> <span class="kt">ListT</span> <span class="o">.</span> <span class="n">f</span>
</div><div class="line">		<span class="n">runKL</span> <span class="n">x</span> <span class="n">ar</span> <span class="ow">=</span> <span class="n">runListT</span> <span class="o">$</span> <span class="n">runKleisli</span> <span class="n">ar</span> <span class="n">x</span>
</div></pre></td></tr></table></div></figure>

<p>Now I do believe I owe you some explanations.</p>

<p>Let’s start with the definition of <code>kl</code>. <code>f</code> is of type <code>a -&gt; m [b]</code>, where <code>m</code> is a monad. After composing it with <code>ListT</code>, we get <code>ListT . f</code> of type <code>a -&gt; ListT m b</code>, where <code>ListT m</code> is a monad now.</p>

<p><code>Kleisli</code> wraps our function into a Kleisli arrow (of type <code>Kleisli (ListT m) a b</code>), so Haskell knows that when we join arrows together, we don’t want to abstract <code>.</code> but <code>&gt;&gt;=</code>. This way, <code>kl f &gt;&gt;&gt; kl g</code> means the same as <code>\x -&gt; f x &gt;&gt;= g</code>, where <code>f &gt;&gt;&gt; g</code> would mean  <code>\x -&gt; (g . f) x</code>.</p>

<p><code>runKL</code> applies our arrow and unwraps the <code>ListT</code> transformer. I reversed the argument order of <code>runKleisli</code> for convenience.</p>

<p>So how is the <code>guessedData</code> calculated? <code>allGuessedFiles</code> returns <code>IO [(LocalTime, FilePath)]</code>. <code>second</code> makes its argument to be applied only to the second argument of the input tuple, so <code>second readDataFile</code> would be of type <code>(a, FilePath) -&gt; IO[(a,(Entry, String))]</code>*, but since we used <code>kl</code>, it’s actually <code>Kleisli (ListT IO) (a, FilePath) (a,(Entry, String))</code>.</p>

<p><em>* Note: I kinda simplified here a bit and technically this type is wrong.</em></p>

<p>The last function, which is a lambda expression, was lifted into a Kleisli arrow with the <code>&gt;&gt;^</code> operator. In case of Kleisli arrows, such lifting is equivalent to <code>\f -&gt; (return . f)</code>. It turns a function of type <code>a-&gt;b</code> into a function of type <code>a -&gt; m b</code> wrapped into a Kleisli.</p>

<p>I also took a peek at the <code>arrow-list</code> package, which provides its own definitions of equivalents for <code>kl</code> and <code>runKL</code>, but I decided to not use it, since it would give little value.</p>

<p><strong>So, was it worth it?</strong></p>

<p>In some sense, yes. I have learnt what monad transformers and Kleisli arrows can be used for. The main problem is that the problem I had to solve was too small for such complex machinery. The transformers made the code more uniform, which allowed application of arrows, while arrows would have made code mode compact if it was more complex.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Karol Stasiak</span></span>

      








  


<time datetime="2014-04-29T01:15:00+02:00" pubdate data-updated="true">2014-04-29</time>
      

<span class="categories">
  
    <a class='category' href='/categories/haskell/'>haskell</a>, <a class='category' href='/categories/programming/'>programming</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://KarolS.github.io/blog/2014/04/29/from-nested-monads-to-kleisli-arrows-over-monad-transformers/" data-via="" data-counturl="http://KarolS.github.io/blog/2014/04/29/from-nested-monads-to-kleisli-arrows-over-monad-transformers/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/01/03/hocr4j-0-1-released/" title="Previous Post: hOCR4J 0.1 released">&laquo; hOCR4J 0.1 released</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/04/29/implementing-catamorphisms-in-java/" title="Next Post: Implementing catamorphisms in Java">Implementing catamorphisms in Java &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/04/29/random-ideas-for-scala-3-0/">Random Ideas for Scala 3.0</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/29/implementing-catamorphisms-in-java/">Implementing Catamorphisms in Java</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/29/from-nested-monads-to-kleisli-arrows-over-monad-transformers/">From Explicit Nested Monads to Kleisli Arrows Over Monad Transformers</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/03/hocr4j-0-1-released/">hOCR4J 0.1 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/02/units-0-1-released/">Units 0.1 Released</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Category Cloud</h1>
    <span id="tag-cloud"><a href='/categories/haskell' style='font-size: 112.0%'>haskell(1)</a> <a href='/categories/hocr4j' style='font-size: 112.0%'>hocr4j(1)</a> <a href='/categories/java' style='font-size: 124.0%'>java(2)</a> <a href='/categories/keyboard' style='font-size: 112.0%'>keyboard(1)</a> <a href='/categories/linux' style='font-size: 112.0%'>linux(1)</a> <a href='/categories/maths' style='font-size: 112.0%'>maths(1)</a> <a href='/categories/ocr' style='font-size: 112.0%'>ocr(1)</a> <a href='/categories/personal-project' style='font-size: 124.0%'>personal project(2)</a> <a href='/categories/programming' style='font-size: 160.0%'>programming(5)</a> <a href='/categories/scala' style='font-size: 124.0%'>scala(2)</a> <a href='/categories/unicode' style='font-size: 112.0%'>unicode(1)</a> <a href='/categories/units' style='font-size: 112.0%'>units(1)</a> <a href='/categories/units-of-measurement' style='font-size: 112.0%'>units of measurement(1)</a> </span>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Karol Stasiak -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'codingfromanelevator';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://KarolS.github.io/blog/2014/04/29/from-nested-monads-to-kleisli-arrows-over-monad-transformers/';
        var disqus_url = 'http://KarolS.github.io/blog/2014/04/29/from-nested-monads-to-kleisli-arrows-over-monad-transformers/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
