
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Random ideas for Scala 3.0 - Karol Stasiak's Blog</title>
  <meta name="author" content="Karol Stasiak">

  
  <meta name="description" content="Here comes a list of things that I would love to see in Scala 3.0. Some of them are breaking changes, hence 3.0 not 2.13 or anything like that. Some &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://KarolS.github.io/blog/2014/04/29/random-ideas-for-scala-3-0">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Karol Stasiak's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-45876308-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Karol Stasiak's Blog</a></h1>
  
    <h2>Coding from an elevator.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:KarolS.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Random Ideas for Scala 3.0</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-29T01:22:00+02:00" pubdate data-updated="true">2014-04-29</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Here comes a list of things that I would love to see in Scala 3.0. Some of them are breaking changes, hence 3.0 not 2.13 or anything like that. Some of them are about the compiler, some of them are about the library, some of them are about the external tools. Some of those ideas are different solutions for the same problem.</p>

<!-- more -->

<h3 id="syntax">Syntax</h3>

<ul>
  <li>
    <p>Treating number literals with leading zeroes as decimal (with a warning for a version or two).</p>
  </li>
  <li>
    <p>Binary and octal literals in forms of <code>0b01010101</code> and <code>0o037</code>.</p>
  </li>
  <li>
    <p>Underscores in numeric literals: <code>1_000_000</code>.</p>
  </li>
  <li>
    <p>Some kind of byte array literal.</p>
  </li>
  <li>
    <p><code>BigInt</code> and <code>BigDecimal</code> literals: <code>100000000000000000000000000000000000N</code>, <code>0.01m</code></p>
  </li>
  <li>
    <p><code>Short</code> and <code>Byte</code> literals, both accepting both signed and unsigned values: <code>20000s</code>, <code>255y</code></p>
  </li>
  <li>
    <p>Removal of XML literals and an <code>xml</code> macro string context as a replacement: <code>xml"&lt;p&gt;Hello $world&lt;/p&gt;"</code></p>
  </li>
  <li>
    <p>Introducing true <code>break</code>, <code>continue</code> and <code>goto</code>.</p>
  </li>
  <li>
    <p>A special syntax for monads, like Haskell’s <code>do</code>.</p>

    <ul>
      <li>
        <p><code>do</code> is already a keyword, it can cause problems with <code>do...while</code> loops.</p>
      </li>
      <li>
        <p><code>for</code> is clunky, especially when it comes to <code>if...else</code>. Maybe fix <code>for</code>?</p>
      </li>
    </ul>
  </li>
</ul>

<h3 id="standard-library">Standard library</h3>

<ul>
  <li>
    <p>Clean-up of the collections. Currently, the standard collections are a little mess. I think <a href="http://www.slideshare.net/extempore/a-scala-corrections-library">Paul Phillips sums it up nicely</a>.</p>
  </li>
  <li>
    <p>Standard <code>scala-time</code> library, being a wrapper for both Joda Time and Java 8 Time API.</p>

    <ul>
      <li>There would be two functionally identical implementations.</li>
    </ul>
  </li>
  <li>
    <p>HLists.</p>
  </li>
  <li>
    <p>Vectors with length known at compile-time.</p>
  </li>
  <li>
    <p>A macro that includes C header files on compile time and generates corresponding JNA interfaces.</p>
  </li>
  <li>
    <p>Removal of <code>/:</code> and <code>:\</code> methods.</p>
  </li>
  <li>
    <p>A clone of .NET’s <code>dynamic</code> type.</p>
  </li>
  <li>
    <p><code>String.toInt</code> and friends accepting a base.</p>
  </li>
  <li>
    <p>A <code>^</code> operator for sets, returning the symmetric difference.</p>
  </li>
</ul>

<h3 id="value-classes">Value classes</h3>

<ul>
  <li>
    <p>Specialization for custom value classes.</p>
  </li>
  <li>
    <p>Generating specialized classes on the fly by the compiler (so the compiler would take an existing class, either ours or from an external library, and specialize it).</p>

    <ul>
      <li>This would allow to specialize collections.</li>
    </ul>
  </li>
  <li>
    <p>Unboxed arrays for custom value classes.</p>
  </li>
  <li>
    <p>Different name mangling for methods taking value classes.</p>

    <ul>
      <li>Currently, if you have <code>class A(x: Int) extends AnyVal</code>, <code>class B(x: Int) extends AnyVal</code> and try to write both <code>def method(a: A)</code> and <code>def method(b: B)</code>, you get an error.</li>
    </ul>
  </li>
  <li>
    <p>Multi-field value classes.</p>

    <ul>
      <li>
        <p>This could work as following: if the value is a field, a local variable, or a parameter, use several variables. If it’s a return value, box it.</p>
      </li>
      <li>
        <p>This of course wouldn’t improve performance much, unless there would be an alternative way to return such values.</p>
      </li>
    </ul>
  </li>
</ul>

<h3 id="type-system">Type system</h3>

<ul>
  <li>
    <p>Almost full type inference for private and local functions and variables.</p>
  </li>
  <li>
    <p>Built-in type-level integers, booleans and strings, with some operations on them.</p>
  </li>
  <li>
    <p>Compile-time null safety – detection of provable paths that could potentially lead to NPE’s.</p>
  </li>
  <li>
    <p>Multimethods.</p>
  </li>
</ul>

<h3 id="fixing-minor-annoyances">Fixing minor annoyances</h3>

<ul>
  <li>
    <p>Adding Scalaz’s <code>some</code> and <code>none</code>.</p>
  </li>
  <li>
    <p>Adding Scalaz’s <code>Equal</code> and <code>Monoid</code> typeclasses.</p>
  </li>
  <li>
    <p><code>@adt</code> annotation on a trait would make the generated <code>apply</code> method of companion objects of case classes that implement that trait return that trait.</p>

    <ul>
      <li>
        <p>For example, annotating <code>Option</code> with <code>@adt</code> and writing <code>var x = Some(1)</code> would make <code>x</code> of type <code>Option[Int]</code>, not <code>Some[Int]</code>.</p>
      </li>
      <li>
        <p>It would be nice to make it somehow work with case objects, especially in polymorphic cases, like with <code>Option</code> and <code>None</code>, or <code>Either</code> and either <code>Left</code> or <code>Right</code> (either of these fixes only one type parameter, not two).</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Ignoring missing annotation definitions in external libraries.</p>
  </li>
  <li>
    <p>Allowing for creating annotations with runtime retention in Scala.</p>
  </li>
</ul>

<h3 id="tooling">Tooling</h3>

<ul>
  <li>
    <p>A decent, officially supported Findbugs plugin.</p>
  </li>
  <li>
    <p>A configurable style checker, preferably including <a href="http://www.scala-lang.org/old/node/8610">“powerlevels”</a>.</p>
  </li>
  <li>
    <p>A Java-to-idiomatic-Scala converter.</p>
  </li>
  <li>
    <p>A Scala-to-idiomatic-Java converter.</p>
  </li>
  <li>
    <p>Easier developing for Android.</p>

    <ul>
      <li>
        <p>Built-in Proguard-like optimizer?</p>
      </li>
      <li>
        <p>Dalvik backend?</p>
      </li>
    </ul>
  </li>
</ul>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Karol Stasiak</span></span>

      








  


<time datetime="2014-04-29T01:22:00+02:00" pubdate data-updated="true">2014-04-29</time>
      

<span class="categories">
  
    <a class='category' href='/categories/programming/'>programming</a>, <a class='category' href='/categories/scala/'>scala</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://KarolS.github.io/blog/2014/04/29/random-ideas-for-scala-3-0/" data-via="" data-counturl="http://KarolS.github.io/blog/2014/04/29/random-ideas-for-scala-3-0/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/04/29/implementing-catamorphisms-in-java/" title="Previous Post: Implementing catamorphisms in Java">&laquo; Implementing catamorphisms in Java</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/04/29/random-ideas-for-scala-3-0/">Random Ideas for Scala 3.0</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/29/implementing-catamorphisms-in-java/">Implementing Catamorphisms in Java</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/29/from-nested-monads-to-kleisli-arrows-over-monad-transformers/">From Explicit Nested Monads to Kleisli Arrows Over Monad Transformers</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/03/hocr4j-0-1-released/">hOCR4J 0.1 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/02/units-0-1-released/">Units 0.1 Released</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Category Cloud</h1>
    <span id="tag-cloud"><a href='/categories/haskell' style='font-size: 112.0%'>haskell(1)</a> <a href='/categories/hocr4j' style='font-size: 112.0%'>hocr4j(1)</a> <a href='/categories/java' style='font-size: 124.0%'>java(2)</a> <a href='/categories/keyboard' style='font-size: 112.0%'>keyboard(1)</a> <a href='/categories/linux' style='font-size: 112.0%'>linux(1)</a> <a href='/categories/maths' style='font-size: 112.0%'>maths(1)</a> <a href='/categories/ocr' style='font-size: 112.0%'>ocr(1)</a> <a href='/categories/personal-project' style='font-size: 124.0%'>personal project(2)</a> <a href='/categories/programming' style='font-size: 160.0%'>programming(5)</a> <a href='/categories/scala' style='font-size: 124.0%'>scala(2)</a> <a href='/categories/unicode' style='font-size: 112.0%'>unicode(1)</a> <a href='/categories/units' style='font-size: 112.0%'>units(1)</a> <a href='/categories/units-of-measurement' style='font-size: 112.0%'>units of measurement(1)</a> </span>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Karol Stasiak -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'codingfromanelevator';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://KarolS.github.io/blog/2014/04/29/random-ideas-for-scala-3-0/';
        var disqus_url = 'http://KarolS.github.io/blog/2014/04/29/random-ideas-for-scala-3-0/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
